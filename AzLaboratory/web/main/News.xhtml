<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:az="http://java.sun.com/jsf/composite/comp"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Agent Zero</title>

        <link rel="stylesheet" type="text/css" href="/AzLaboratory/styles/main.css" />
    </h:head>

    <h:body>
        <az:labHeader/>
        <table class="news" id="welcome-table"  cellspacing="15px" cellpadding="0px">
            <tr coll-span="3">
                <td colspan="4" class="news-left" width="35%">
                    <table width="100%">
                        <tr>
                            <td colspan="4" class="news-left-title">
                                welcome to the AgentZero NewsStand. Your source<br/>
                                for DCR related news, articles and new discoveries.
                            </td>
                        </tr>
                        <tr>
                            <h:form>
                                <td class="news-write">
                                    <p:commandButton styleClass="news-write-button" action="#{search.writeSomething()}" value="Write something"/>
                                </td>
                            </h:form>
                        </tr>
                        <tr>
                            <h:form>
                                <td colspan="4" class="news-left-search-input" width="100%">
                                    <h:inputText class="news-search-input" id="search" required="true" value="" label="search" autocomplete="false"/>
                                    <p:watermark styleClass="news-search-watermark" value="To search - type key word and press enter" for="search"/>

                                </td>
                            </h:form>
                        </tr>
                        <tr>
                            <td>
                                <h:form id="buttons" class="news-search-buttons">
                                    <table>
                                        <tr>
                                            <td>
                                                <p:commandButton  action="#{search.changeStateTo('recent')}" value="Recent" styleClass="news-search-button #{search.watchingNow.toString() == 'recent'? 'news-watching-now':''}" update=":results,:buttons"/>
                                            </td>
                                            <td>
                                                <p:commandButton  action="#{search.changeStateTo('comments')}" value="Comments" styleClass="news-search-button #{search.watchingNow.toString() == 'comments'? 'news-watching-now':''}" update=":results,:buttons"/>
                                            </td>
                                            <td>
                                                <p:commandButton  action="#{search.changeStateTo('tags')}" value="Tags" styleClass="news-search-button #{search.watchingNow.toString() == 'tags'? 'news-watching-now':''}" update=":results,:buttons"/>
                                            </td>
                                            <td>
                                                <p:commandButton  action="#{search.changeStateTo('popular')}" value="Popular" styleClass="news-search-button #{search.watchingNow.toString() == 'popular'? 'news-watching-now':''}" update=":results,:buttons" />

                                            </td>
                                        </tr>
                                    </table>

                                </h:form>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p:panel id="results" styleClass="news-search-results">
                                    <table>
                                        <ui:repeat var="result" value="#{search.results}">
                                            <tr>
                                                <td>
                                                    <az:searchResultsView article="#{result}"/>
                                                </td>
                                            </tr>
                                        </ui:repeat>     
                                    </table>
                                    <div> 
                                        <h:form>

                                            <table>
                                                <tr>
                                                    <td>
                                                        <p:commandLink actionListener="#{search.prevPage()}"  update=":results"  title="Previous page">
                                                            <img style="border: 0;" src="/AzLaboratory/images/page-prev.png"/>
                                                        </p:commandLink>
                                                    </td>
                                                    <td class="news-page-body">page</td>
                                                    <td class="news-page">#{search.currentPage}</td>
                                                    <td class="news-page-body"> of</td>
                                                    <td class="news-page">#{search.totalPages}</td>
                                                    <td>
                                                        <p:commandLink action="#{search.nextPage()}"  update=":results" title="Next page">
                                                            <img style="border: 0;" src="/AzLaboratory/images/page-next.png"/>
                                                        </p:commandLink>
                                                    </td>
                                                </tr>
                                            </table>
                                            <br/>
                                        </h:form>
                                    </div>
                                </p:panel>

                            </td>
                        </tr> 
                    </table>
                </td>
                <td class="news-right" width="65%">
                    <p:panel id="search-view">
                        <table width="100%" class="news-search-result">  
                            <tr>
                                <td class="news-search-result-title">
                                    #{search.viewed.title}
                                </td>
                            </tr>
                            <tr>
                                <td class="news-search-result-date">
                                    by <span class="news-search-result-date-inner">#{search.viewed.users.name}</span> on <span class="news-search-result-date-inner">#{search.viewed.creationDate}</span> 
                                </td>
                            </tr>
                            <tr>
                                <td class="news-search-result-content">
                                    #{search.getViewdContent()}
                                </td>
                            </tr>

                        </table>
                    </p:panel>
                </td>
            </tr>
        </table>

    </h:body>
</html>

