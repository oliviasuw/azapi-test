/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package resources.templates;

import bgu.dcr.az.anop.algo.impl.*;
import java.util.LinkedList;

@code{  
    // SOME HELPER FUNCTIONS
    def lc(string) {
        CodeUtils.camelCaseToLowerLine(string).toUpperCase();
    }

    def castify(type) {
        type.replaceAll("\\$", ".");
    }
}    
public class @{className} extends AbstractAgentManipulator{
    @foreach{h : handlers}
    public static final ParameterInfo[] @{lc(h.declaredName)}_PARAM_INFO = {
        @foreach{param : h.params}
        new ParameterInfoImpl("{param.name}", JavaTypeParser.parse("@{param.typeFQN}"))
        @end{","}
    };
    public static final JavaDocInfo @{lc(h.declaredName)}_JAVADOC_INFO = JavaDocParser.parse("@{h.javadoc}");    
    @end{}
    
    public @{className}() {
        super.algorithmName = "@{algorithmName}";
        super.configurationDelegate = new @{configurationDelegateClassName}();
        super.handlers = new LinkedList<>();
        
        @foreach{h : handlers} 
        handlers.add(new HanlerInfoImpl(@{lc(h.declaredName)}_JAVADOC_INFO, @{h.of}, @{lc(h.declaredName)}_PARAM_INFO));
        @end{}
    }

    @Override
    public void callHandler(Object agentInstance, String name, Object[] arguments) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
    
}
